define(["../core"],function(n){"use strict";var e=function(l,r,t,c,i,u,f){var o=0,a=l.length,s=null==t;if("object"===n.type(t)){i=!0;for(o in t)e(l,r,o,t[o],!0,u,f)}else if(c!==undefined&&(i=!0,n.isFunction(c)||(f=!0),s&&(f?(r.call(l,c),r=null):(s=r,r=function(e,l,r){return s.call(n(e),r)})),r))for(;o<a;o++)r(l[o],t,f?c:c.call(l[o],o,r(l[o],t)));return i?l:s?r.call(l):a?r(l[0],t):u};return e});