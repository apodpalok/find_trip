define(["./core","./core/access","./data/var/dataPriv","./data/var/dataUser"],function(e,t,n,a){"use strict";function r(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:s.test(e)?JSON.parse(e):e)}function i(e,t,n){var i;if(n===undefined&&1===e.nodeType)if(i="data-"+t.replace(u,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=r(n)}catch(e){}a.set(e,t,n)}else n=undefined;return n}var s=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,u=/[A-Z]/g;return e.extend({hasData:function(e){return a.hasData(e)||n.hasData(e)},data:function(e,t,n){return a.access(e,t,n)},removeData:function(e,t){a.remove(e,t)},_data:function(e,t,a){return n.access(e,t,a)},_removeData:function(e,t){n.remove(e,t)}}),e.fn.extend({data:function(r,s){var u,f,c,o=this[0],d=o&&o.attributes;if(r===undefined){if(this.length&&(c=a.get(o),1===o.nodeType&&!n.get(o,"hasDataAttrs"))){for(u=d.length;u--;)d[u]&&(f=d[u].name,0===f.indexOf("data-")&&(f=e.camelCase(f.slice(5)),i(o,f,c[f])));n.set(o,"hasDataAttrs",!0)}return c}return"object"==typeof r?this.each(function(){a.set(this,r)}):t(this,function(e){var t;if(o&&e===undefined){if((t=a.get(o,r))!==undefined)return t;if((t=i(o,r))!==undefined)return t}else this.each(function(){a.set(this,r,e)})},null,s,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){a.remove(this,e)})}}),e});